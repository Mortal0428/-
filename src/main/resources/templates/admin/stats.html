<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>统计报表</title>
    <link rel="stylesheet" th:href="@{/css/app.css}"/>
</head>
<body>
<div class="container">
    <div class="card">
        <h2>统计报表</h2>
        <div class="nav-links">
            <a class="btn" th:href="@{/admin}">返回首页</a>
            <a class="btn btn-outline" th:href="@{/admin/logs}">查看操作日志</a>
        </div>
        
        <div class="stats-grid">
            <div class="stat-card">
                <h3>通过申请</h3>
                <div class="stat-number" th:text="${approvedCount}">0</div>
            </div>
            <div class="stat-card">
                <h3>拒绝申请</h3>
                <div class="stat-number" th:text="${rejectedCount}">0</div>
            </div>
        </div>
        
        <h3>通过申请详情</h3>
        <div class="table-container">
            <table class="table">
                <thead>
                    <tr>
                        <th>学生姓名</th>
                        <th>学号</th>
                        <th>申请类型</th>
                        <th>申请理由</th>
                        <th>通过时间</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="app : ${approvedApps}">
                        <td th:text="${app.student.name}"></td>
                        <td th:text="${app.student.studentNo}"></td>
                        <td th:text="${app.type == 'grant' ? '助学金' : '国家励志奖学金'}"></td>
                        <td th:text="${app.reason}"></td>
                        <td th:text="${#temporals.format(app.updateTime, 'yyyy-MM-dd HH:mm')}"></td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <h3>拒绝申请详情</h3>
        <div class="table-container">
            <table class="table">
                <thead>
                    <tr>
                        <th>学生姓名</th>
                        <th>学号</th>
                        <th>申请类型</th>
                        <th>申请理由</th>
                        <th>拒绝时间</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="app : ${rejectedApps}">
                        <td th:text="${app.student.name}"></td>
                        <td th:text="${app.student.studentNo}"></td>
                        <td th:text="${app.type == 'grant' ? '助学金' : '国家励志奖学金'}"></td>
                        <td th:text="${app.reason}"></td>
                        <td th:text="${#temporals.format(app.updateTime, 'yyyy-MM-dd HH:mm')}"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<style>
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin: 20px 0;
    }
    .stat-card {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 8px;
        text-align: center;
        border: 1px solid #dee2e6;
    }
    .stat-number {
        font-size: 2em;
        font-weight: bold;
        color: #1976d2;
        margin-top: 10px;
    }
    
    .table-container {
        overflow-x: auto;
        margin: 20px 0;
    }
</style>
</body>
</html>
