<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Â≠¶Áîü‰∏ªÈ°µ</title>
    <link rel="stylesheet" th:href="@{/css/app.css}"/>
    <link rel="stylesheet" th:href="@{/css/sidebar.css}"/>
    <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Â∑¶‰æßÂØºËà™Ê†è -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="user-info">
                    <div class="user-avatar">
                        <img th:src="@{/images/default-avatar.png}" alt="Áî®Êà∑Â§¥ÂÉè" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiM2NzdFRUEiLz4KPHN2ZyB4PSI4IiB5PSI4IiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSI+CjxwYXRoIGQ9Ik0xMiAxMkMxNC4yMDkxIDEyIDE2IDEwLjIwOTEgMTYgOEMxNiA1Ljc5MDg2IDE0LjIwOTEgNCAxMiA0QzkuNzkwODYgNCA4IDUuNzkwODYgOCA4QzggMTAuMjA5MSA5Ljc5MDg2IDEyIDEyIDEyWiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTEyIDE0QzguNjc5MTUgMTQgNiAxNi42NzkxIDYgMjBIMThDMTggMTYuNjc5MSAxNS4zMjA5IDE0IDEyIDE0WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cjwvc3ZnPgo='"/>
                    </div>
                    <div class="user-details">
                        <div class="username" th:text="${#authentication.name}">Áî®Êà∑</div>
                        <div class="user-status">
                            <span class="status-dot online"></span>
                            <span>Âú®Á∫ø</span>
                        </div>
                    </div>
                </div>
                <div class="logout-btn">
                    <form th:action="@{/logout}" method="post" style="display: inline;">
                        <button type="submit" class="logout-link" style="background: none; border: none; color: inherit; cursor: pointer; padding: 0; font: inherit;">
                            <span class="logout-icon">‚Ü©</span>
                            <span>Ê≥®ÈîÄ</span>
                        </button>
                    </form>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <ul class="nav-menu">
                    <li>
                        <a th:href="@{/student/home}" class="nav-item active">
                            <span class="nav-icon">üè†</span>
                            <span class="nav-text">‰∏ªÈ°µ</span>
                        </a>
                    </li>
                    
                    <li>
                        <a th:href="@{/student/profile}" class="nav-item">
                            <span class="nav-icon">üë§</span>
                            <span class="nav-text">ÂÆåÂñÑËµÑÊñô</span>
                        </a>
                    </li>
                    
                    <li>
                        <a th:href="@{/student/application/new}" class="nav-item">
                            <span class="nav-icon">üìù</span>
                            <span class="nav-text">Êñ∞Âª∫Áî≥ËØ∑</span>
                        </a>
                    </li>
                    
                    <li>
                        <a th:href="@{/student/application/progress}" class="nav-item">
                            <span class="nav-icon">üìä</span>
                            <span class="nav-text">Áî≥ËØ∑ËøõÂ∫¶</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
        
        <!-- ‰∏ªÂÜÖÂÆπÂå∫Âüü -->
        <div class="main-content">
            <div class="content-header">
                <div class="breadcrumb">
                    <span>Â≠¶Áîü‰∏ªÈ°µ</span>
                </div>
            </div>
            <div class="content-body">
                <div class="card" style="margin-bottom:20px;">
                    <div class="welcome">Ê¨¢ËøéÔºå<span th:text="${username}"></span>ÔºÅ</div>
                    <h2 style="margin-top:0;">ÂÖ¨Âëä</h2>
                    <table class="table">
                        <tr>
                            <th>Ê†áÈ¢ò</th>
                            <th>ÂèëÂ∏ÉÊó∂Èó¥</th>
                            <th>Êìç‰Ωú</th>
                        </tr>
                        <tr th:each="a : ${announcements}">
                            <td th:text="${a.title}"></td>
                            <td th:text="${#temporals.format(a.createTime, 'yyyy-MM-dd HH:mm')}"></td>
                            <td><a th:href="@{'/announcements/' + ${a.id}}">Êü•ÁúãËØ¶ÊÉÖ</a></td>
                        </tr>
                        <tr th:if="${#lists.isEmpty(announcements)}">
                            <td colspan="3">ÊöÇÊó†ÂÖ¨Âëä</td>
                        </tr>
                    </table>
                </div>
                <div class="card">
                    <h2 style="margin-top:0;">ÂÖ¨Á§∫</h2>
                    <table class="table">
                        <tr>
                            <th>Áî≥ËØ∑‰∫∫</th>
                            <th>Á±ªÂûã</th>
                            <th>ÂÖ¨Á§∫Ëµ∑Ê≠¢</th>
                            <th>Áä∂ÊÄÅ</th>
                            <th>Êìç‰Ωú</th>
                        </tr>
                        <tr th:each="p : ${publicities}">
                            <td th:text="${p.application.student.name}"></td>
                            <td th:text="${p.application.type == 'grant' ? 'Âä©Â≠¶Èáë' : 'ÂõΩÂÆ∂Âä±ÂøóÂ•ñÂ≠¶Èáë'}"></td>
                            <td th:text="${#temporals.format(p.startTime, 'yyyy-MM-dd')} + ' ~ ' + ${#temporals.format(p.endTime, 'yyyy-MM-dd')}"></td>
                            <td th:text="${p.status == 'publicizing' ? 'ÂÖ¨Á§∫‰∏≠' : (p.status == 'has_objection' ? 'ÊúâÂºÇËÆÆ' : 'Êó†ÂºÇËÆÆ')}"></td>
                            <td><a th:href="@{'/publicity/' + ${p.id}}">Êü•ÁúãËØ¶ÊÉÖ</a></td>
                        </tr>
                        <tr th:if="${#lists.isEmpty(publicities)}">
                            <td colspan="5">ÊöÇÊó†ÂÖ¨Á§∫</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
</body>
</html>